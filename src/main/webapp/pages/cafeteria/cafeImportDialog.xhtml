<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	<h:head>
		<title>Cafetéria Excel import</title>
		<h:outputStylesheet name="exc-style.css" />
   
	</h:head>
	
	<h:body>
		 
		<p:growl id="messages" showDetail="true" />
		 
	
        <p:panel rendered="#{cafeController.unknownStaffs.size()>0}">
			
			<p><h:outputLabel value="Problémás munkatárs nevek:" style="color:red;" /></p>
			
			<ui:repeat var="us" value="#{cafeController.unknownStaffs}">
				<h:outputText value="#{us}" /><br/>
				
			</ui:repeat>
			
	    </p:panel>	
		
		
		<p:panel rendered="#{cafeController.validStaffs.size()>0}">
			
			<p:dataTable value="#{cafeController.validStaffs}" var="vs" >
				<f:facet name="header">
		            Feldolgozható munkatárs nevek
		        </f:facet>
				
				<p:column headerText="Név">
			        <h:outputText value="#{vs.staff.fullName}" />
			    </p:column>
				<p:column headerText="Adószám" styleClass="#{vs.getTaxCSS()}">
			        <h:outputText value="#{vs.getComparedTaxNumber()}" />
			    </p:column>
				<p:column headerText="Belépés" styleClass="#{vs.getDateCSS()}">
				    <h:outputText value="#{vs.getComparedStartDate()}" />
			    </p:column>
				<p:column headerText="Éves keret">
			        <h:outputText value="#{vs.yearlyLimit}" />
			    </p:column>
				<p:column headerText="Korábbi keret">
			        <h:outputText value="#{vs.staff.getYearlyLimit(-1)}" />
			    </p:column>
			    <p:column headerText="Csoport" styleClass="#{vs.getGroupCSS()}">
			        <h:outputText value="#{vs.getComparedWorkGroup()}" />
			    </p:column>
    
			</p:dataTable >
			
		
			
	    </p:panel>	
		
		<p:panel>
		 	<h:form enctype="multipart/form-data" >
		 	
		    	<h:inputFile value="#{cafeController.filePart}" style="width:70%;"/>
            	<p:commandButton value="Feltöltés" ajax="false" actionListener="#{cafeController.checkExcel()}" />
			</h:form>
		 
		 </p:panel>
		 
	</h:body>

</ui:composition>